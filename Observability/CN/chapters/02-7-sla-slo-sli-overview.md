
# SLA -> SLO -> SLI 的层级关系

在服务质量管理中，**SLA**（服务级别协议）、**SLO**（服务级别目标）、**SLI**（服务级别指标）是一个递进的层级关系，依次从高层到具体指标逐步细化，形成完整的服务质量管理框架。

---

## 层级关系：SLA -> SLO -> SLI

### 1. SLA（Service Level Agreement）服务级别协议
- **定义**：
  - SLA 是服务提供方和用户（或客户）之间的正式协议，规定服务质量的最低保证和责任。例如，网络服务的可用性要达到 99.99%。
- **核心特点**：
  - 面向用户：强调客户体验，通常以非技术的方式定义服务表现。
  - 结果导向：关注业务最终的结果，如服务的可靠性、可用性等。
  - 具有法律约束力：未达 SLA 时，通常有违约赔偿或补偿条款。
- **示例**：
  - 一个云服务提供商可能承诺其存储服务的全年可用性不低于 99.9%。

---

### 2. SLO（Service Level Objective）服务级别目标
- **定义**：
  - SLO 是 SLA 中的具体技术目标，定义了衡量服务是否达标的具体标准。
  - 它是 SLA 的核心组成部分，是服务提供方内部的可操作化目标。
- **核心特点**：
  - 技术驱动：明确具体的性能目标，如错误率、时延等。
  - 可监控性：基于 SLI 数据验证 SLO 是否达成。
  - 可协商性：通常是服务提供方和客户协商后设定的。
- **示例**：
  - 针对 SLA 中的“全年可用性不低于 99.9%”，可以设置 SLO 为“每月停机时间不超过 43 分钟”。
  - 对 HTTP 服务的响应时间，SLO 可以是“95% 的请求响应时间小于 500ms”。

---

### 3. SLI（Service Level Indicator）服务级别指标
- **定义**：
  - SLI 是最底层的技术指标，用于实际测量服务表现。SLI 是实现 SLO 的基础，通过实时监控服务性能，生成可用的指标数据。
- **核心特点**：
  - 数据化：提供了可量化、可监控的具体指标。
  - 细粒度：SLI 指标往往非常具体，例如“错误率”、“时延”等。
  - 实时性：通常由监控系统实时采集生成。
- **示例**：
  - 一个 HTTP 服务的 SLI 可能是“成功的 HTTP 请求占总请求的比例”（成功率）。
  - 网络传输的 SLI 可以是“平均时延”、“丢包率”等。

---

## 三者关系

| **层级** | **内容**                              | **关注重点**                    | **谁负责**                        |
|----------|---------------------------------------|----------------------------------|------------------------------------|
| **SLA**  | 面向客户的服务协议                     | 客户最终关心的服务质量与保证       | 服务提供方与客户共同定义            |
| **SLO**  | 具体的技术目标，支撑 SLA 的实现         | 技术团队需实现的性能目标           | 技术团队与客户协商（内部驱动较多）   |
| **SLI**  | 可量化的底层指标，支撑 SLO 的衡量       | 实时反映系统性能和状态            | 技术团队、监控系统负责采集和分析    |

---

## 举例说明

假设有一个云存储服务：

1. **SLA（顶层）**：
   - 年度服务可用性 99.9%。
   - 如果可用性未达到，将退还用户当月服务费用。

2. **SLO（中间层）**：
   - 每月服务停机时间不超过 43 分钟。
   - 平均 HTTP 响应时间不超过 500ms。

3. **SLI（底层指标）**：
   - 实时监控“服务的平均可用性”。
   - HTTP 请求的 95% 响应时间。
   - TCP 建联失败率、错误率。

---

## 与服务监控的结合

- **监控 SLI**：实时监控底层指标（如延时、丢包率等）并存储数据。
- **验证 SLO**：将监控的 SLI 数据与预设 SLO 目标对比，判断是否达标。
- **支撑 SLA**：通过 SLO 达成 SLA，同时监控未满足 SLA 的潜在风险。

通过这种层次关系，企业可以从服务协议的抽象目标到技术实现的具体细节，全面地管理和优化服务质量。


# 建设可度量 SLI、SLO 网络及业务可用性评价体系的量化表格

## SLI 指标的分类：

### 性能：
- 网络流量吞吐
- 数据包数量
- 活跃连接数

### 可用性：
- TCP 零窗
- TCP 重传
- TCP 建联失败
- HTTP 异常
- DNS 异常

### 时延：
- TCP 建联时延
- TCP 系统时延
- 应用响应时延
- DNS 时延
- HTTP 时延

---

## 表格数据

| 序号 | SLI/性能指标         | SLO/目标性能指标 | 资源池网络性能评估 |
|------|-----------------------|------------------|--------------------|
| 1    | 流量吞吐比特均值      | 3Gbps           | 资源池性能         |
| 2    | 活跃连接数均值        | 500K            |                    |
| 3    | TCP 重传比例          | 1%              |                    |
| 4    | TCP 零窗比例          | 3%              |                    |
| 5    | TCP 建连失败比例       | 5%              |                    |
| 6    | 平均 TCP 建连时延      | 50ms            |                    |
| 7    | 平均 TCP 系统时延      | 50ms            |                    |
| 8    | 平均应用时延均值       | 1s              |                    |
| 9    | HTTP 异常比例         | 5%              |                    |
| 10   | DNS 异常比例          | 5%              |                    |

